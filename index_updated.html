<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phishing Awareness - Interactive Learning</title>
  <style>
    :root {
      --primary: #3b82f6;
      --primary-light: #60a5fa;
      --secondary: #7c3aed;
      --secondary-light: #8b5cf6;
      --accent: #f59e0b;
      --accent-light: #fcd34d;
      --background: #f9fafb;
      --foreground: #111827;
      --card: #ffffff;
      --card-foreground: #111827;
      --border: #e5e7eb;
      --input: #e5e7eb;
      --ring: #3b82f6;
      --radius: 0.5rem;
    }

    .dark {
      --background: #111827;
      --foreground: #f9fafb;
      --card: #1f2937;
      --card-foreground: #f9fafb;
      --border: #374151;
      --input: #374151;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.5;
      background-color: var(--background);
      color: var(--foreground);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Layout */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .flex {
      display: flex;
    }

    .flex-col {
      flex-direction: column;
    }

    .items-center {
      align-items: center;
    }

    .justify-between {
      justify-content: space-between;
    }

    .flex-grow {
      flex-grow: 1;
    }

    .grid {
      display: grid;
    }

    .grid-cols-1 {
      grid-template-columns: 1fr;
    }

    .grid-cols-3 {
      grid-template-columns: repeat(3, 1fr);
    }

    .gap-4 {
      gap: 1rem;
    }

    .gap-6 {
      gap: 1.5rem;
    }

    .space-x-2 > * + * {
      margin-left: 0.5rem;
    }

    .space-y-1 > * + * {
      margin-top: 0.25rem;
    }

    .space-y-3 > * + * {
      margin-top: 0.75rem;
    }

    .mb-2 {
      margin-bottom: 0.5rem;
    }

    .mb-3 {
      margin-bottom: 0.75rem;
    }

    .mb-4 {
      margin-bottom: 1rem;
    }

    .mb-6 {
      margin-bottom: 1.5rem;
    }

    .mr-2 {
      margin-right: 0.5rem;
    }

    .mt-2 {
      margin-top: 0.5rem;
    }

    .mt-4 {
      margin-top: 1rem;
    }

    .mt-6 {
      margin-top: 1.5rem;
    }

    /* Header */
    .header {
      background-color: var(--primary);
      color: white;
      padding: 1rem 0;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .header h1 {
      font-size: 1.5rem;
      font-weight: bold;
      cursor: pointer;
    }

    .nav-links {
      display: flex;
      align-items: center;
    }

    .nav-links a {
      color: white;
      margin-left: 1rem;
      text-decoration: none;
      transition: color 0.2s;
    }

    .nav-links a:hover {
      color: var(--accent-light);
    }

    /* Card */
    .card {
      background-color: var(--card);
      color: var(--card-foreground);
      border-radius: var(--radius);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      overflow: hidden;
    }

    .card-header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--border);
      background-color: #f8fafc;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .dark .card-header {
      background-color: #1e293b;
    }

    .card-content {
      padding: 1.5rem;
    }

    .card-bottom {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--border);
      background-color: #f8fafc;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .dark .card-bottom {
      background-color: #1e293b;
    }

    /* Badge */
    .badge {
      display: inline-flex;
      padding: 0.25rem 0.5rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      color: white;
    }

    .badge-blue {
      background-color: var(--primary);
    }

    .badge-amber {
      background-color: var(--accent);
    }

    .badge-purple {
      background-color: var(--secondary);
    }

    /* Button */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      font-weight: 500;
      border-radius: var(--radius);
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background-color: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--primary-light);
    }

    .btn-secondary {
      background-color: var(--secondary);
      color: white;
    }

    .btn-secondary:hover {
      background-color: var(--secondary-light);
    }

    .btn-outline {
      background-color: transparent;
      border: 1px solid var(--border);
      color: var(--foreground);
    }

    .btn-outline:hover {
      background-color: #f1f5f9;
    }

    .dark .btn-outline:hover {
      background-color: #334155;
    }

    .btn-icon {
      padding: 0.5rem;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Sidebar */
    .sidebar {
      width: 256px;
      background-color: var(--card);
      height: 100%;
      position: fixed;
      top: 0;
      left: 0;
      padding-top: 4rem;
      box-shadow: 2px 0 8px rgba(0, 0, 0, 0.05);
      transition: width 0.3s cubic-bezier(0.87, 0, 0.13, 1);
      z-index: 10;
      overflow: hidden;
    }

    .sidebar.collapsed {
      width: 80px;
    }

    .sidebar-header {
      padding: 1.5rem 1rem;
    }

    .sidebar-content {
      padding: 0 1rem;
    }

    .sidebar-toggle {
      position: absolute;
      top: 6rem;
      right: -0.75rem;
      width: 1.5rem;
      height: 1.5rem;
      background-color: white;
      border: 1px solid var(--border);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      z-index: 20;
    }

    .dark .sidebar-toggle {
      background-color: #1e293b;
      border-color: #334155;
    }

    .nav-item {
      display: flex;
      align-items: center;
      padding: 0.75rem 1rem;
      border-radius: var(--radius);
      cursor: pointer;
      transition: background-color 0.2s;
      margin-bottom: 0.25rem;
      text-decoration: none;
      color: var(--foreground);
    }

    .nav-item:hover {
      background-color: #f1f5f9;
    }

    .dark .nav-item:hover {
      background-color: #334155;
    }

    .nav-item.active {
      background-color: var(--secondary);
      color: white;
    }

    .nav-item-icon {
      margin-right: 0.75rem;
      display: flex;
    }

    .nav-item-text {
      font-size: 0.875rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
      transition: opacity 0.2s, width 0.2s;
    }

    .sidebar.collapsed .nav-item-text {
      opacity: 0;
      width: 0;
      margin-right: 0;
    }

    /* Email Template */
    .email-template {
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 1.5rem;
    }

    .email-header {
      background-color: #f8fafc;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
    }

    .dark .email-header {
      background-color: #1e293b;
    }

    .email-body {
      padding: 1rem;
      white-space: pre-line;
    }

    .email-sender {
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .email-subject {
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    .highlight {
      background-color: rgba(245, 158, 11, 0.2);
      border: 2px solid var(--accent);
      border-radius: 0.25rem;
      padding: 0 0.25rem;
    }

    /* Red Flag */
    .red-flag {
      padding: 0.75rem;
      background-color: #fff7ed;
      border-radius: var(--radius);
      margin-bottom: 0.5rem;
    }

    .dark .red-flag {
      background-color: rgba(245, 158, 11, 0.2);
    }

    .red-flag-title {
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    /* Progress */
    .progress-container {
      width: 100%;
      height: 0.625rem;
      background-color: #e5e7eb;
      border-radius: 9999px;
      overflow: hidden;
      margin-bottom: 0.25rem;
    }

    .dark .progress-container {
      background-color: #374151;
    }

    .progress-bar {
      height: 100%;
      background-color: var(--primary);
      border-radius: 9999px;
      transition: width 0.3s ease;
    }

    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid var(--border);
      margin-bottom: 1rem;
    }

    .tab {
      padding: 0.75rem 1rem;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
    }

    .tab:hover {
      color: var(--primary);
    }

    .tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    /* Game Elements */
    .game-stats {
      padding: 1rem;
      background-color: #f8fafc;
      border-radius: var(--radius);
      margin-bottom: 1rem;
    }

    .dark .game-stats {
      background-color: #1e293b;
    }

    .game-stats-header {
      display: flex;
      align-items: center;
      margin-bottom: 0.75rem;
      font-weight: 500;
    }

    .points-display {
      display: flex;
      align-items: center;
      background: linear-gradient(to right, #dbeafe, #ede9fe);
      padding: 0.75rem;
      border-radius: var(--radius);
      margin-bottom: 0.75rem;
    }

    .dark .points-display {
      background: linear-gradient(to right, rgba(30, 58, 138, 0.2), rgba(91, 33, 182, 0.2));
    }

    .points-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary);
    }

    .dark .points-value {
      color: #93c5fd;
    }

    .level-badge {
      display: flex;
      align-items: center;
      background-color: var(--secondary);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-weight: 500;
    }

    .badges-section {
      margin-bottom: 0.75rem;
    }

    .badge-item {
      display: inline-flex;
      align-items: center;
      padding: 0.375rem 0.75rem;
      border-radius: 9999px;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .badge-earned {
      background: linear-gradient(to right, var(--primary), var(--secondary));
      color: white;
    }

    .badge-locked {
      background-color: transparent;
      border: 1px solid #d1d5db;
      color: #9ca3af;
    }

    /* Animation effect */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeIn 0.3s ease forwards;
    }

    /* Hunt Challenge */
    .hunt-challenge {
      background-color: #f8fafc;
      border-radius: var(--radius);
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .dark .hunt-challenge {
      background-color: #1e293b;
    }

    .hunt-challenge-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .timer {
      display: flex;
      align-items: center;
      background-color: #dbeafe;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .dark .timer {
      background-color: rgba(30, 58, 138, 0.3);
    }

    .flag-item {
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .flag-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .flag-item.found {
      background-color: #dcfce7;
      border-color: #86efac;
    }

    .dark .flag-item.found {
      background-color: rgba(22, 163, 74, 0.2);
      border-color: #22c55e;
    }

    .flag-item.hint {
      background-color: #fff7ed;
      border: 1px dashed #fdba74;
    }

    .dark .flag-item.hint {
      background-color: rgba(234, 88, 12, 0.2);
      border-color: #fb923c;
    }

    /* Main content */
    .main-content {
      margin-left: 256px;
      padding: 1rem;
      transition: margin-left 0.3s cubic-bezier(0.87, 0, 0.13, 1);
      padding-top: 5rem;
    }

    .main-content.sidebar-collapsed {
      margin-left: 80px;
    }

    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.mobile-open {
        transform: translateX(0);
      }
      
      .main-content {
        margin-left: 0;
      }
    }

    @media (min-width: 768px) {
      .grid-cols-4 {
        grid-template-columns: repeat(4, 1fr);
      }

      .md-col-span-3 {
        grid-column: span 3;
      }
    }

    /* Icons */
    .icon {
      display: inline-block;
      width: 1em;
      height: 1em;
      stroke-width: 0;
      stroke: currentColor;
      fill: currentColor;
      vertical-align: middle;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .modal {
      background-color: var(--card);
      border-radius: var(--radius);
      padding: 1.5rem;
      max-width: 28rem;
      width: calc(100% - 2rem);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      text-align: center;
    }

    .modal-icon {
      margin: 0 auto 1rem;
      height: 4rem;
      width: 4rem;
      color: #eab308;
    }

    .modal-title {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
      color: var(--primary);
    }

    .dark .modal-title {
      color: #93c5fd;
    }

    .modal-points {
      display: inline-block;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-weight: bold;
      margin: 1rem 0;
    }

    /* Theme toggle */
    .theme-toggle {
      border: none;
      background: transparent;
      color: white;
      cursor: pointer;
      width: 2rem;
      height: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 9999px;
    }

    .theme-toggle:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* Mobile Menu */
    .mobile-menu-btn {
      display: none;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: block;
        position: fixed;
        top: 1rem;
        left: 1rem;
        z-index: 20;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container flex items-center justify-between">
      <div class="flex items-center">
        <svg class="icon mr-2" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
        </svg>
        <h1>Phishing Awareness</h1>
      </div>
      <div class="nav-links">
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
          <svg class="icon sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="icon moon-icon" style="display: none;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <button id="mobile-menu-btn" class="btn btn-outline btn-icon mobile-menu-btn">
    <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </button>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-toggle" id="sidebar-toggle">
      <svg class="icon chevron-left" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
      <svg class="icon chevron-right" style="display: none;" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </div>
    
    <div class="sidebar-header">
      <h2 class="nav-item-text">Learning Module</h2>
      
      <div class="mt-4 nav-item-text">
        <p class="text-sm mb-2">Your Progress</p>
        <div class="progress-container">
          <div class="progress-bar" style="width: 30%;"></div>
        </div>
        <p class="text-right text-sm">30% complete</p>
      </div>
    </div>
    
    <div class="sidebar-content">
      <nav>
        <a href="#" class="nav-item active">
          <div class="nav-item-icon">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
          </div>
          <span class="nav-item-text">PayPal Security Alert</span>
          <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
        </a>
        <a href="#" class="nav-item">
          <div class="nav-item-icon">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
          </div>
          <span class="nav-item-text">Netflix Account Verification</span>
        </a>
        <a href="#" class="nav-item">
          <div class="nav-item-icon">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
          </div>
          <span class="nav-item-text">Microsoft 365 Password Expiration</span>
        </a>
        <a href="#" class="nav-item">
          <div class="nav-item-icon">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
          </div>
          <span class="nav-item-text">Amazon Order Confirmation</span>
        </a>
        <a href="#" class="nav-item">
          <div class="nav-item-icon">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
          </div>
          <span class="nav-item-text">Google Account Security Alert</span>
        </a>
        <a href="#" class="nav-item">
          <div class="nav-item-icon">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
          </div>
          <span class="nav-item-text">Bank SMS Alert</span>
        </a>
        <a href="#" class="nav-item">
          <div class="nav-item-icon">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
          </div>
          <span class="nav-item-text">Package Delivery Text</span>
        </a>
      </nav>
    </div>
  </div>

  <main id="main-content" class="main-content">
    <div class="container">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div class="md-col-span-3 grid-cols-3">
          <div class="card">
            <div class="card-header">
              <h3 class="text-lg font-medium">PayPal Security Alert</h3>
              <span class="badge badge-blue">Phishing</span>
            </div>
            
            <div class="tabs">
              <div class="tab active" data-tab="learn">
                <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" y1="16" x2="12" y2="12"></line>
                  <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                Learn
              </div>
              <div class="tab" data-tab="hunt">
                <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                Hunt
              </div>
              <div class="tab" data-tab="quiz">
                <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                </svg>
                Quiz
              </div>
            </div>
            
            <div class="card-content">
              <div id="learn-tab" class="tab-content">
                <div class="email-template">
                  <div class="email-header">
                    <p class="email-sender">From: <span class="highlight">paypal-secure@paypa1.com</span></p>
                    <p>To: customer@example.com</p>
                    <p class="email-subject">Subject: 🔐 URGENT: Your PayPal account has been limited</p>
                  </div>
                  <div class="email-body">
                    <div class="flex items-center mb-4">
                      <div class="text-xl font-bold text-blue-600">PayPal</div>
                    </div>
                    
                    <p>Dear Valued Customer,</p>
                    <p>We have detected suspicious activity on your PayPal account. Your account access has been temporarily limited as a security precaution.</p>
                    <p>To restore full access to your account, please verify your information by clicking the button below:</p>
                    
                    <div class="flex justify-center my-6">
                      <button class="btn btn-primary highlight">Restore Account Access Now</button>
                    </div>
                    
                    <p>If we don't hear from you within 24 hours, your account will be permanently suspended.</p>
                    <p>Thank you for your prompt attention to this matter.</p>
                    <p>The PayPal Security Team</p>
                    
                    <div class="mt-6 pt-6 border-t text-xs text-gray-500 highlight">
                      <p>PayPal Inc., 2211 North First Street, San lose, CA 95110</p>
                      <p>© 2023 PayPal, Inc. All rights reserved.</p>
                    </div>
                  </div>
                </div>
                
                <div class="mt-6">
                  <h4 class="font-medium mb-3">Identify the Red Flags</h4>
                  <p class="mb-3 text-sm">Click on the buttons below to highlight suspicious elements:</p>
                  
                  <div class="flex flex-wrap gap-2 mb-4">
                    <button class="btn btn-outline" data-flag="sender">From: paypal-secure@paypa1.com</button>
                    <button class="btn btn-outline" data-flag="logo">Logo/Branding</button>
                    <button class="btn btn-outline" data-flag="button">Restore Account Access Now button</button>
                    <button class="btn btn-outline" data-flag="content">Email Content</button>
                    <button class="btn btn-outline" data-flag="footer">PayPal Inc., 2211 North First Street, San lose, CA 95110</button>
                  </div>
                  
                  <div id="flag-explanations">
                    <!-- Flag explanations will appear here -->
                  </div>
                </div>
                
                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-md mt-6">
                  <h4 class="font-medium mb-3">What You Should Do</h4>
                  <ul class="list-disc pl-5 space-y-1 text-sm">
                    <li>Never click on buttons or links in suspicious messages</li>
                    <li>Check the sender's address carefully for misspellings or unusual patterns</li>
                    <li>Contact the company directly through their official website or app</li>
                    <li>Report phishing attempts to the impersonated company</li>
                  </ul>
                </div>
              </div>
              
              <div id="hunt-tab" class="tab-content" style="display: none;">
                <div class="hunt-challenge">
                  <div class="hunt-challenge-header">
                    <h4 class="font-medium">Red Flag Hunt Challenge</h4>
                    <div class="timer">
                      <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                      </svg>
                      <span id="timer-display">01:30</span>
                    </div>
                  </div>
                  
                  <div id="hunt-instruction" class="bg-gray-100 dark:bg-gray-800 p-4 rounded-md mb-4">
                    <h4 class="font-medium mb-2">How to Play</h4>
                    <p class="text-sm mb-3">Find all the red flags in a phishing example before time runs out!</p>
                    <ul class="text-sm space-y-1 list-disc pl-5 mb-4">
                      <li>Click on suspicious elements in the example</li>
                      <li>Use hints if you get stuck</li>
                      <li>Find all 5 red flags before time expires</li>
                    </ul>
                    <button id="start-hunt" class="btn btn-secondary">
                      <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                      </svg>
                      Start Challenge
                    </button>
                  </div>
                  
                  <div id="hunt-game" style="display: none;">
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-sm font-medium">
                        Red Flags Found: <span id="flags-found">0</span> / 5
                      </span>
                      <button id="get-hint" class="btn btn-outline btn-icon">
                        <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <circle cx="12" cy="12" r="10"></circle>
                          <line x1="12" y1="16" x2="12" y2="12"></line>
                          <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        Get Hint
                      </button>
                    </div>
                    
                    <p class="text-sm mb-3">Click on the elements that you think are suspicious. Be careful - not all options are actually red flags!</p>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4">
                      <div class="flag-item" data-flag="sender" data-correct="true">
                        <p class="font-medium">From: paypal-secure@paypa1.com</p>
                      </div>
                      <div class="flag-item" data-flag="logo" data-correct="true">
                        <p class="font-medium">Logo/Branding</p>
                      </div>
                      <div class="flag-item" data-flag="button" data-correct="true">
                        <p class="font-medium">Restore Account Access Now button</p>
                      </div>
                      <div class="flag-item" data-flag="greeting" data-correct="false">
                        <p class="font-medium">"Dear Valued Customer" greeting</p>
                      </div>
                      <div class="flag-item" data-flag="content" data-correct="true">
                        <p class="font-medium">Email Content with urgency</p>
                      </div>
                      <div class="flag-item" data-flag="copyright" data-correct="false">
                        <p class="font-medium">© 2023 PayPal, Inc. All rights reserved.</p>
                      </div>
                      <div class="flag-item" data-flag="footer" data-correct="true">
                        <p class="font-medium">PayPal Inc., 2211 North First Street, San lose, CA 95110</p>
                      </div>
                      <div class="flag-item" data-flag="signature" data-correct="false">
                        <p class="font-medium">The PayPal Security Team signature</p>
                      </div>
                    </div>
                  </div>
                  
                  <div id="hunt-complete" class="bg-blue-100 dark:bg-blue-900/30 p-4 rounded-md mb-4 text-center" style="display: none;">
                    <svg class="icon mx-auto mb-2 text-blue-600" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="8" r="7"></circle>
                      <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                    </svg>
                    <h4 class="font-medium text-lg mb-2" id="hunt-result-title">Challenge Completed!</h4>
                    <p class="mb-2" id="hunt-result-message">You found 5 out of 5 red flags with 00:45 remaining!</p>
                    <p class="text-sm mb-4" id="hunt-result-feedback">
                      Great job! You have a keen eye for spotting phishing attempts.
                    </p>
                    <button id="restart-hunt" class="btn btn-secondary">
                      <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                      </svg>
                      Try Again
                    </button>
                  </div>
                </div>
              </div>
              
              <div id="quiz-tab" class="tab-content" style="display: none;">
                <div class="card">
                  <div class="card-content">
                    <div class="flex justify-between items-center mb-4">
                      <h3 class="text-lg font-medium">Security Quiz</h3>
                      <div class="bg-blue-100 dark:bg-blue-900/30 px-3 py-1 rounded-full text-sm font-medium">
                        Question <span id="question-number">1</span> of 3
                      </div>
                    </div>
                    
                    <div id="quiz-questions">
                      <div class="quiz-question" data-question="1">
                        <h4 class="text-xl mb-4">What is the main goal of a phishing attack?</h4>
                        
                        <div class="space-y-3">
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="0">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>To install hardware backdoors</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="1">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>To steal sensitive information or credentials</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="2">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>To physically damage computer systems</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="3">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>To advertise products or services</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="quiz-question" data-question="2" style="display: none;">
                        <h4 class="text-xl mb-4">Which of these is a red flag in this example?</h4>
                        
                        <div class="space-y-3">
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="0">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>From: paypal-secure@paypa1.com</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="1">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>Restore Account Access Now button</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="2">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>PayPal Inc., 2211 North First Street, San lose, CA 95110</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="3">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>All options are secure</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="quiz-question" data-question="3" style="display: none;">
                        <h4 class="text-xl mb-4">What action should you take if you receive this message?</h4>
                        
                        <div class="space-y-3">
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="0">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>Click the link and update your information immediately</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="1">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>Reply directly to ask for verification</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="2">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>Forward to the IT security team and delete it</span>
                            </div>
                          </div>
                          <div class="p-3 border-2 rounded-md cursor-pointer transition bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700" data-option="3">
                            <div class="flex items-center">
                              <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
                              <span>Call the phone number provided in the message</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div id="answer-feedback" style="display: none;"></div>
                    
                    <div id="quiz-complete" style="display: none;">
                      <div class="flex flex-col items-center">
                        <svg class="icon text-yellow-500 mb-4" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <circle cx="12" cy="8" r="7"></circle>
                          <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                        </svg>
                        <h3 class="text-xl font-bold mb-2">Quiz Completed!</h3>
                        <p class="text-lg mb-4">Your Score: <span id="quiz-score">0</span> out of 3</p>
                        
                        <div id="quiz-feedback" class="bg-blue-100 dark:bg-blue-900/30 p-4 rounded-md text-center mb-4">
                          <p class="font-medium text-blue-700 dark:text-blue-400">Good job! Keep learning to become a security expert.</p>
                        </div>
                        
                        <button id="restart-quiz" class="btn btn-primary mt-4">
                          Try Another Quiz
                        </button>
                      </div>
                    </div>
                    
                    <div class="flex justify-end mt-4">
                      <button id="check-answer" class="btn btn-secondary">
                        Check Answer
                      </button>
                      <button id="next-question" class="btn btn-primary" style="display: none;">
                        Next Question
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="card-bottom">
              <button class="btn btn-outline flex items-center" disabled>
                <svg class="icon mr-1" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="19" y1="12" x2="5" y2="12"></line>
                  <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
                Previous
              </button>
              
              <div class="text-sm text-neutral-500 dark:text-gray-400">
                Example 1 of 7
              </div>
              
              <div class="flex space-x-2">
                <button class="btn btn-primary">
                  Mark Complete
                </button>
                
                <button class="btn btn-secondary flex items-center">
                  Next
                  <svg class="icon ml-1" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                    <polyline points="12 5 19 12 12 19"></polyline>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="grid-cols-1">
          <div class="card sticky top-4">
            <div class="card-header">
              <h3 class="font-medium flex items-center">
                <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
                Your Security Stats
              </h3>
            </div>
            <div class="card-content">
              <div class="game-stats">
                <div class="game-stats-header">
                  <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                  </svg>
                  <h3 class="text-md font-medium">Your Progress</h3>
                </div>
                
                <div class="points-display">
                  <div class="flex-1">
                    <p class="text-sm text-gray-600 dark:text-gray-400">Security Points</p>
                    <p class="points-value">150</p>
                  </div>
                  <div class="level-badge">
                    <svg class="icon mr-1.5" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="8" r="7"></circle>
                      <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                    </svg>
                    <span class="font-medium">Level 3</span>
                  </div>
                </div>
                
                <div class="badges-section">
                  <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Badges Earned (2/5)</p>
                  <div class="flex flex-wrap gap-2">
                    <div class="badge-item badge-earned">
                      <svg class="icon mr-1.5" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                      </svg>
                      Novice Defender
                    </div>
                    <div class="badge-item badge-earned">
                      <svg class="icon mr-1.5" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                      </svg>
                      Phishing Expert
                    </div>
                    <div class="badge-item badge-locked">
                      <svg class="icon mr-1.5" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                      </svg>
                      ???
                    </div>
                    <div class="badge-item badge-locked">
                      <svg class="icon mr-1.5" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="3" y1="9" x2="21" y2="9"></line>
                        <line x1="9" y1="21" x2="9" y2="9"></line>
                      </svg>
                      ???
                    </div>
                    <div class="badge-item badge-locked">
                      <svg class="icon mr-1.5" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="8" r="7"></circle>
                        <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                      </svg>
                      ???
                    </div>
                  </div>
                </div>

                <div class="text-xs text-gray-500 dark:text-gray-500 mt-2">
                  Complete challenges to earn more points and badges!
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div id="congrats-modal" class="modal-overlay" style="display: none;">
    <div class="modal">
      <div class="relative">
        <svg class="modal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="8" r="7"></circle>
          <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
        </svg>
        <svg class="icon absolute -top-2 -right-2 text-yellow-400" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
        </svg>
      </div>
      
      <h2 class="modal-title">Great job!</h2>
      <p class="mb-3 text-gray-700 dark:text-gray-300" id="modal-message">You've completed this example!</p>
      
      <div class="modal-points" id="modal-points">
        +20 Points!
      </div>
      
      <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">
        Keep going to unlock more badges and rewards!
      </p>
      
      <button id="close-modal" class="btn btn-secondary">
        <svg class="icon mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
        </svg>
        Continue Learning
      </button>
    </div>
  </div>

  <script>
    // DOM Elements
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebar-toggle');
    const mainContent = document.getElementById('main-content');
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const themeToggle = document.getElementById('theme-toggle');
    const sunIcon = document.querySelector('.sun-icon');
    const moonIcon = document.querySelector('.moon-icon');
    const flagButtons = document.querySelectorAll('[data-flag]');
    const flagExplanations = document.getElementById('flag-explanations');
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const quizOptions = document.querySelectorAll('[data-option]');
    const checkAnswerBtn = document.getElementById('check-answer');
    const nextQuestionBtn = document.getElementById('next-question');
    const answerFeedback = document.getElementById('answer-feedback');
    const quizQuestions = document.querySelectorAll('.quiz-question');
    const questionNumber = document.getElementById('question-number');
    const quizComplete = document.getElementById('quiz-complete');
    const quizScore = document.getElementById('quiz-score');
    const restartQuizBtn = document.getElementById('restart-quiz');
    const quizFeedback = document.getElementById('quiz-feedback');
    const startHuntBtn = document.getElementById('start-hunt');
    const huntInstruction = document.getElementById('hunt-instruction');
    const huntGame = document.getElementById('hunt-game');
    const getHintBtn = document.getElementById('get-hint');
    const flagsFound = document.getElementById('flags-found');
    const timerDisplay = document.getElementById('timer-display');
    const huntComplete = document.getElementById('hunt-complete');
    const huntResultTitle = document.getElementById('hunt-result-title');
    const huntResultMessage = document.getElementById('hunt-result-message');
    const huntResultFeedback = document.getElementById('hunt-result-feedback');
    const restartHuntBtn = document.getElementById('restart-hunt');
    const flagItems = document.querySelectorAll('.flag-item');
    const congratsModal = document.getElementById('congrats-modal');
    const closeModalBtn = document.getElementById('close-modal');
    const modalMessage = document.getElementById('modal-message');
    const modalPoints = document.getElementById('modal-points');

    // Red Flag explanations
    const redFlagData = {
      // Correct red flags
      "sender": {
        "title": "Suspicious Sender Address",
        "explanation": "Notice that the domain is 'paypa1.com' (with the number '1') not the legitimate 'paypal.com'"
      },
      "logo": {
        "title": "Suspicious Logo/Branding",
        "explanation": "The logo is slightly different from the official PayPal logo. Phishers often use modified versions of official logos."
      },
      "button": {
        "title": "Suspicious Action Button",
        "explanation": "The button likely links to a fake PayPal site designed to steal your login credentials. Hovering over it might reveal a suspicious URL."
      },
      "content": {
        "title": "Suspicious Content",
        "explanation": "The urgent tone and time pressure ('within 24 hours') are classic manipulation tactics to rush you into action without thinking."
      },
      "footer": {
        "title": "Suspicious Footer",
        "explanation": "The address contains a typo: 'San lose' instead of 'San Jose'. Legitimate companies carefully proofread their communications."
      },
      
      // Incorrect flags - not actually suspicious
      "greeting": {
        "title": "Normal Greeting",
        "explanation": "While generic, 'Dear Valued Customer' is a common greeting in legitimate business emails and not by itself an indicator of phishing."
      },
      "copyright": {
        "title": "Standard Copyright Notice",
        "explanation": "The copyright notice follows standard formatting and is not a red flag in this message."
      },
      "signature": {
        "title": "Standard Signature",
        "explanation": "The signature 'The PayPal Security Team' is how legitimate security communications would be signed and is not suspicious by itself."
      }
    };

    // Quiz data
    const quizData = [
      {
        correctAnswer: 1,
        explanation: "Phishing attacks aim to trick users into revealing sensitive information like passwords, credit card details, or personal data."
      },
      {
        correctAnswer: 0,
        explanation: "The sender domain 'paypa1.com' with the number '1' instead of the letter 'l' is a common phishing tactic to deceive recipients."
      },
      {
        correctAnswer: 2,
        explanation: "You should report suspicious messages to your security team and never click links or provide information in response to unsolicited messages."
      }
    ];

    // Game state
    let currentTab = 'learn';
    let selectedOption = null;
    let currentQuestion = 0;
    let score = 0;
    let huntTimer = null;
    let timeRemaining = 90;
    let foundFlags = [];
    let lastHint = null;
    let isSidebarCollapsed = false;
    let isMobileView = window.innerWidth < 768;
    let isDarkMode = false;

    // Initialize the UI
    function initializeUI() {
      // Check for saved theme preference
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
        isDarkMode = true;
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }

      // Add event listeners
      sidebarToggle.addEventListener('click', toggleSidebar);
      mobileMenuBtn.addEventListener('click', toggleMobileSidebar);
      themeToggle.addEventListener('click', toggleTheme);
      
      // Flag button listeners
      flagButtons.forEach(button => {
        button.addEventListener('click', () => {
          const flag = button.getAttribute('data-flag');
          highlightFlag(flag, button);
        });
      });

      // Tab listeners
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabName = tab.getAttribute('data-tab');
          switchTab(tabName);
        });
      });

      // Quiz listeners
      quizOptions.forEach(option => {
        option.addEventListener('click', () => {
          selectOption(option);
        });
      });

      checkAnswerBtn.addEventListener('click', checkAnswer);
      nextQuestionBtn.addEventListener('click', nextQuestion);
      restartQuizBtn.addEventListener('click', restartQuiz);

      // Hunt listeners
      startHuntBtn.addEventListener('click', startHunt);
      getHintBtn.addEventListener('click', getHint);
      restartHuntBtn.addEventListener('click', restartHunt);
      
      flagItems.forEach(item => {
        item.addEventListener('click', () => {
          const flag = item.getAttribute('data-flag');
          findFlag(flag, item);
        });
      });

      // Modal listeners
      closeModalBtn.addEventListener('click', closeModal);

      // Responsive listeners
      window.addEventListener('resize', checkViewportSize);
    }

    // Toggle sidebar
    function toggleSidebar() {
      isSidebarCollapsed = !isSidebarCollapsed;
      
      if (isSidebarCollapsed) {
        document.querySelector('.chevron-left').style.display = 'none';
        document.querySelector('.chevron-right').style.display = 'block';
      } else {
        document.querySelector('.chevron-left').style.display = 'block';
        document.querySelector('.chevron-right').style.display = 'none';
      }
      
      sidebar.classList.toggle('collapsed', isSidebarCollapsed);
      mainContent.classList.toggle('sidebar-collapsed', isSidebarCollapsed);
    }

    // Toggle mobile sidebar
    function toggleMobileSidebar() {
      sidebar.classList.toggle('mobile-open');
    }

    // Toggle theme
    function toggleTheme() {
      isDarkMode = !isDarkMode;
      
      if (isDarkMode) {
        document.documentElement.classList.add('dark');
        localStorage.setItem('theme', 'dark');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        document.documentElement.classList.remove('dark');
        localStorage.setItem('theme', 'light');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }
    }

    // Check viewport size
    function checkViewportSize() {
      isMobileView = window.innerWidth < 768;
      
      if (isMobileView) {
        sidebar.classList.remove('mobile-open');
        mainContent.classList.remove('sidebar-collapsed');
      } else {
        mainContent.classList.toggle('sidebar-collapsed', isSidebarCollapsed);
      }
    }

    // Highlight flag function
    function highlightFlag(flag, button) {
      button.classList.toggle('bg-accent');
      button.classList.toggle('text-white');
      
      const emailElement = document.querySelector(`.highlight[data-flag="${flag}"]`);
      if (emailElement) {
        emailElement.classList.toggle('highlight');
      }
      
      // Toggle explanation
      const existingExplanation = document.querySelector(`#explanation-${flag}`);
      if (existingExplanation) {
        existingExplanation.remove();
      } else {
        const explanation = document.createElement('div');
        explanation.id = `explanation-${flag}`;
        explanation.className = 'red-flag fade-in';
        explanation.innerHTML = `
          <p class="red-flag-title">${redFlagData[flag].title}</p>
          <p>${redFlagData[flag].explanation}</p>
        `;
        flagExplanations.appendChild(explanation);
      }
    }

    // Switch tab function
    function switchTab(tabName) {
      currentTab = tabName;
      
      // Update tab classes
      tabs.forEach(tab => {
        if (tab.getAttribute('data-tab') === tabName) {
          tab.classList.add('active');
        } else {
          tab.classList.remove('active');
        }
      });
      
      // Show/hide tab content
      tabContents.forEach(content => {
        if (content.id === `${tabName}-tab`) {
          content.style.display = 'block';
        } else {
          content.style.display = 'none';
        }
      });
    }

    // Select quiz option
    function selectOption(option) {
      if (selectedOption !== null) {
        document.querySelector(`[data-option="${selectedOption}"]`).querySelector('div').classList.remove('bg-blue-500');
        document.querySelector(`[data-option="${selectedOption}"]`).querySelector('div').classList.add('border-gray-300');
      }
      
      selectedOption = option.getAttribute('data-option');
      option.querySelector('div').classList.remove('border-gray-300');
      option.querySelector('div').classList.add('bg-blue-500');
    }

    // Check answer
    function checkAnswer() {
      if (selectedOption === null) return;
      
      const correctAnswer = quizData[currentQuestion].correctAnswer;
      const isCorrect = parseInt(selectedOption) === correctAnswer;
      
      // Update options to show correct/incorrect
      quizOptions.forEach(option => {
        const optionIndex = parseInt(option.getAttribute('data-option'));
        const optionElement = option.querySelector('div');
        
        if (optionIndex === correctAnswer) {
          option.classList.add('bg-green-100');
          option.classList.add('border-green-500');
          optionElement.innerHTML = `
            <svg class="mr-2 h-5 w-5 text-green-500 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            <span>${option.querySelector('span').textContent}</span>
          `;
        } else if (optionIndex === parseInt(selectedOption) && !isCorrect) {
          option.classList.add('bg-red-100');
          option.classList.add('border-red-500');
          optionElement.innerHTML = `
            <svg class="mr-2 h-5 w-5 text-red-500 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
            <span>${option.querySelector('span').textContent}</span>
          `;
        }
      });
      
      // Show feedback
      answerFeedback.style.display = 'block';
      answerFeedback.className = `p-4 rounded-md mb-4 fade-in ${isCorrect ? 'bg-green-100' : 'bg-red-100'}`;
      answerFeedback.innerHTML = `
        <div class="flex items-start">
          ${isCorrect ? 
            `<svg class="mr-2 h-5 w-5 text-green-500 mt-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>` : 
            `<svg class="mr-2 h-5 w-5 text-red-500 mt-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>`
          }
          <div>
            <p class="font-medium mb-1">${isCorrect ? 'Correct!' : 'Incorrect!'}</p>
            <p class="text-sm">${quizData[currentQuestion].explanation}</p>
          </div>
        </div>
      `;
      
      // Update UI
      checkAnswerBtn.style.display = 'none';
      nextQuestionBtn.style.display = 'block';
      
      // Update score
      if (isCorrect) {
        score++;
      }
    }

    // Next question
    function nextQuestion() {
      // Reset selected option
      selectedOption = null;
      
      // Hide feedback
      answerFeedback.style.display = 'none';
      
      // Update UI
      checkAnswerBtn.style.display = 'block';
      nextQuestionBtn.style.display = 'none';
      
      // Reset options
      quizOptions.forEach(option => {
        option.classList.remove('bg-green-100', 'bg-red-100', 'border-green-500', 'border-red-500');
        const optionElement = option.querySelector('div');
        optionElement.innerHTML = `
          <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
          <span>${optionElement.querySelector('span')?.textContent || ''}</span>
        `;
      });
      
      if (currentQuestion < quizData.length - 1) {
        // Move to next question
        currentQuestion++;
        questionNumber.textContent = currentQuestion + 1;
        
        // Show current question
        quizQuestions.forEach((question, index) => {
          if (index === currentQuestion) {
            question.style.display = 'block';
          } else {
            question.style.display = 'none';
          }
        });
      } else {
        // Quiz complete
        completeQuiz();
      }
    }

    // Complete quiz
    function completeQuiz() {
      quizQuestions.forEach(question => {
        question.style.display = 'none';
      });
      
      quizComplete.style.display = 'block';
      quizScore.textContent = score;
      
      // Update feedback
      if (score === quizData.length) {
        quizFeedback.innerHTML = `
          <svg class="h-8 w-8 text-green-500 mx-auto mb-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          <p class="font-medium text-green-700 dark:text-green-400">Perfect Score! You're a security expert!</p>
        `;
        quizFeedback.className = 'bg-green-100 dark:bg-green-900/30 p-4 rounded-md text-center mb-4';
        
        // Show congratulations modal
        setTimeout(() => {
          showModal("Perfect score on the security quiz!", 50);
        }, 1000);
      } else if (score >= quizData.length / 2) {
        quizFeedback.className = 'bg-blue-100 dark:bg-blue-900/30 p-4 rounded-md text-center mb-4';
        
        // Show congratulations modal
        setTimeout(() => {
          showModal(`You completed the security quiz with ${score}/${quizData.length} correct!`, 30);
        }, 1000);
      } else {
        quizFeedback.className = 'bg-amber-100 dark:bg-amber-900/30 p-4 rounded-md text-center mb-4';
      }
    }

    // Restart quiz
    function restartQuiz() {
      currentQuestion = 0;
      score = 0;
      selectedOption = null;
      
      // Reset UI
      questionNumber.textContent = 1;
      quizComplete.style.display = 'none';
      answerFeedback.style.display = 'none';
      checkAnswerBtn.style.display = 'block';
      nextQuestionBtn.style.display = 'none';
      
      // Show first question
      quizQuestions.forEach((question, index) => {
        if (index === 0) {
          question.style.display = 'block';
        } else {
          question.style.display = 'none';
        }
      });
      
      // Reset options
      quizOptions.forEach(option => {
        option.classList.remove('bg-green-100', 'bg-red-100', 'border-green-500', 'border-red-500');
        const optionElement = option.querySelector('div');
        optionElement.innerHTML = `
          <div class="w-4 h-4 mr-3 border-2 border-gray-300 dark:border-gray-600 rounded-full flex-shrink-0"></div>
          <span>${optionElement.querySelector('span')?.textContent || ''}</span>
        `;
      });
    }

    // Start hunt
    function startHunt() {
      huntInstruction.style.display = 'none';
      huntGame.style.display = 'block';
      foundFlags = [];
      flagsFound.textContent = 0;
      timeRemaining = 90;
      updateTimerDisplay();
      
      // Start timer
      huntTimer = setInterval(() => {
        timeRemaining--;
        updateTimerDisplay();
        
        if (timeRemaining <= 0) {
          clearInterval(huntTimer);
          endHunt(false);
        }
      }, 1000);
      
      // Reset flag items
      flagItems.forEach(item => {
        // Remove classes
        item.classList.remove('found', 'hint', 'incorrect');
        
        // Reset styling
        item.style.backgroundColor = '';
        item.style.borderColor = '';
        item.style.borderStyle = '';
        
        // Restore original content (just keep the original text)
        const originalText = item.querySelector('p.font-medium').textContent;
        item.innerHTML = `<p class="font-medium">${originalText}</p>`;
      });
    }

    // Update timer display
    function updateTimerDisplay() {
      const minutes = Math.floor(timeRemaining / 60);
      const seconds = timeRemaining % 60;
      timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    // Find flag
    function findFlag(flag, item) {
      if (foundFlags.includes(flag)) return;
      
      const isCorrect = item.getAttribute('data-correct') === 'true';
      
      foundFlags.push(flag);
      
      if (isCorrect) {
        // This is a real red flag
        item.classList.add('found');
        
        // Show success explanation
        item.innerHTML += `
          <div class="flex items-center mt-2">
            <svg class="text-green-500 mr-1" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            <p class="text-sm text-green-600 dark:text-green-400 font-medium">
              Correct! This is a red flag.
            </p>
          </div>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            ${redFlagData[flag].explanation}
          </p>
        `;
      } else {
        // This is not a red flag
        item.classList.add('incorrect');
        
        // Apply incorrect styling
        item.style.backgroundColor = 'rgba(252, 165, 165, 0.2)';
        item.style.borderColor = '#ef4444';
        
        // Show error explanation
        item.innerHTML += `
          <div class="flex items-center mt-2">
            <svg class="text-red-500 mr-1" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
            <p class="text-sm text-red-600 dark:text-red-400 font-medium">
              Not a red flag!
            </p>
          </div>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            ${redFlagData[flag].explanation}
          </p>
        `;
      }
      
      // Update UI - only count correctly identified flags
      const correctlyIdentified = document.querySelectorAll('.flag-item.found').length;
      flagsFound.textContent = correctlyIdentified;
      
      // Count total actual red flags
      const totalRedFlags = document.querySelectorAll('.flag-item[data-correct="true"]').length;
      
      // Check if all real red flags found
      if (correctlyIdentified === totalRedFlags) {
        endHunt(true);
      }
    }

    // Get hint
    function getHint() {
      // Only get hints for actual red flags
      const correctFlags = Array.from(document.querySelectorAll('.flag-item[data-correct="true"]'))
        .map(item => item.getAttribute('data-flag'));
      
      // Filter for correct flags that haven't been found yet
      const remainingCorrectFlags = correctFlags.filter(flag => !foundFlags.includes(flag));
      
      if (remainingCorrectFlags.length === 0) return;
      
      // Clear previous hint
      if (lastHint) {
        document.querySelector(`[data-flag="${lastHint}"]`).classList.remove('hint');
      }
      
      // Choose a random flag from the remaining correct ones
      const hintFlag = remainingCorrectFlags[Math.floor(Math.random() * remainingCorrectFlags.length)];
      const hintItem = document.querySelector(`[data-flag="${hintFlag}"]`);
      
      hintItem.classList.add('hint');
      
      // Add hint text
      const hintText = document.createElement('p');
      hintText.className = 'text-sm text-amber-600 dark:text-amber-400 mt-1 font-medium';
      hintText.textContent = `Hint: This is a suspicious element - ${redFlagData[hintFlag].title}`;
      
      // Remove existing hint text
      const existingHint = hintItem.querySelector('.text-amber-600');
      if (existingHint) {
        existingHint.remove();
      }
      
      hintItem.appendChild(hintText);
      
      lastHint = hintFlag;
      
      // Remove hint after 3 seconds
      setTimeout(() => {
        if (lastHint === hintFlag && !foundFlags.includes(hintFlag)) {
          hintItem.classList.remove('hint');
          hintText.remove();
          lastHint = null;
        }
      }, 5000);
    }

    // End hunt
    function endHunt(success) {
      clearInterval(huntTimer);
      huntGame.style.display = 'none';
      huntComplete.style.display = 'block';
      
      // Count the total number of actual red flags
      const totalRedFlags = document.querySelectorAll('.flag-item[data-correct="true"]').length;
      
      // Count correctly identified flags
      const correctlyIdentified = document.querySelectorAll('.flag-item.found').length;
      
      // Count incorrectly flagged items
      const incorrectlyFlagged = document.querySelectorAll('.flag-item.incorrect').length;
      
      if (success) {
        huntResultTitle.textContent = 'Challenge Completed!';
        huntResultMessage.textContent = `You found all ${correctlyIdentified} real red flags with ${timerDisplay.textContent} remaining!`;
        
        if (incorrectlyFlagged === 0) {
          huntResultFeedback.textContent = 'Perfect! You identified all suspicious elements and made no mistakes!';
        } else {
          huntResultFeedback.textContent = `You also incorrectly identified ${incorrectlyFlagged} elements that weren't actually suspicious.`;
        }
        
        // Calculate points based on time remaining and accuracy
        const timePoints = Math.floor(timeRemaining / 5); // 1 point for every 5 seconds remaining
        const accuracyPoints = incorrectlyFlagged === 0 ? 30 : 0; // Bonus for perfect accuracy
        const totalPoints = 50 + timePoints + accuracyPoints - (incorrectlyFlagged * 5); // Penalty for incorrect flags
        
        // Show congratulations modal
        setTimeout(() => {
          let message = `You found all the red flags! +${timePoints} time bonus!`;
          if (incorrectlyFlagged === 0) {
            message += " Perfect accuracy +30 bonus!";
          } else {
            message += ` ${incorrectlyFlagged} incorrect flags (-${incorrectlyFlagged * 5} points)`;
          }
          showModal(message, totalPoints);
        }, 1000);
      } else {
        huntResultTitle.textContent = 'Time\'s Up!';
        huntResultMessage.textContent = `You found ${correctlyIdentified} out of ${totalRedFlags} red flags`;
        
        if (incorrectlyFlagged > 0) {
          huntResultFeedback.textContent = `You also incorrectly identified ${incorrectlyFlagged} elements. Keep practicing to improve your phishing detection skills!`;
        } else {
          huntResultFeedback.textContent = 'Keep practicing to improve your phishing detection skills!';
        }
        
        // Show congratulations modal if found at least one flag
        if (correctlyIdentified > 0) {
          setTimeout(() => {
            let message = `You found ${correctlyIdentified} red flags before time ran out!`;
            if (incorrectlyFlagged > 0) {
              message += ` (with ${incorrectlyFlagged} incorrect flags)`;
            }
            const points = Math.max(0, (correctlyIdentified * 10) - (incorrectlyFlagged * 5));
            showModal(message, points);
          }, 1000);
        }
      }
      
      // Reveal any missed red flags
      const missedFlags = document.querySelectorAll('.flag-item[data-correct="true"]:not(.found)');
      missedFlags.forEach(item => {
        const flag = item.getAttribute('data-flag');
        item.style.backgroundColor = 'rgba(219, 234, 254, 0.3)';
        item.style.borderColor = '#3b82f6';
        item.style.borderStyle = 'dashed';
        
        item.innerHTML += `
          <div class="flex items-center mt-2">
            <svg class="text-blue-500 mr-1" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <p class="text-sm text-blue-600 dark:text-blue-400 font-medium">
              Missed red flag!
            </p>
          </div>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            ${redFlagData[flag].explanation}
          </p>
        `;
      });
    }

    // Restart hunt
    function restartHunt() {
      huntComplete.style.display = 'none';
      startHunt();
    }

    // Show modal
    function showModal(message, points) {
      modalMessage.textContent = message;
      modalPoints.textContent = `+${points} Points!`;
      congratsModal.style.display = 'flex';
      
      // Trigger confetti
      simulateConfetti();
    }

    // Close modal
    function closeModal() {
      congratsModal.style.display = 'none';
    }

    // Simulate confetti
    function simulateConfetti() {
      // We would use canvas-confetti here, but since this is a standalone HTML file
      // we're just simulating the effect with CSS animations
    }

    // Initialize everything when the DOM is loaded
    document.addEventListener('DOMContentLoaded', initializeUI);
  </script>
</body>
</html>